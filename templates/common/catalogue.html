{% load static %}
{% load custom_filter %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Destinations</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{% static 'styles/styles.css' %}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

  <body>
  <header>
    <div id="logo">
        <img src="{% static 'images/clipart904585.png' %}"/>
        <a href="{% url 'home' %}">Home</a>
    </div>
    <nav>
      <div>
            <form id="searchbar" method="post">
                {{ form.target }}
                {% csrf_token %}
                {% if form.target %}
                    <button type="submit">Search</button>
                {% endif %}
            </form>
        </div>
      <ul role="list">
        <li><a href="{% url 'catalogue' %}">Destinations</a></li>
      </ul>
      <ul role="list" class="register-btns">
      {% if not user.is_authenticated %}
            <li><a href="#">About</a></li>
            <li><a href="{% url 'create profile' %}">SignIn</a></li>
            <li><a href="{% url 'login' %}">LogIn</a></li>
      {% else %}
            <li><a href="{% url 'create destination' %}">Add Destination</a></li>
            <li><a href="{% url 'details profile' %}">Profile</a></li>
            <li><a href="{% url 'logout' %}">LogOut</a></li>
      {% endif %}
      </ul>
    </nav>
  </header>

  <main>
    {% for destination in destinations %}
        <div class="destination-catalogue">
            <div class="picture-content-catalogue">
                <div>
                    <img src="{{ destination.image.url }}">
                     <div class="buttons-catalogue">
                         {% if destination.id in liked_destination %}
                             <a href="{% url 'like' destination.pk %}"><i class="fa-sharp fa-solid fa-thumbs-up"></i> {{ destination|filter_likes }}</a>
                         {% else %}
                             <a href="{% url 'like' destination.pk %}"><i class="fa-regular fa-thumbs-up"></i> {{ destination|filter_likes }}</a>
                         {% endif %}
                         {% if destination.id in favorite_destinations %}
                             <a href="{% url 'add favorite' destination.pk %}"><i class="fa-solid fa-star"></i>Favorite</a>
                         {% else %}
                             <a href="{% url 'add favorite' destination.pk %}"><i class="fa-regular fa-star"></i>Favorite</a>
                         {% endif %}
                     </div>
                      <form class="destination-details" method="post" action="{% url 'catalogue' %}">
                    {{ form }}
                    {% csrf_token %}
                    <button>Submit</button>
                    </form>
                </div>

                 <div>
                     <h1>{{ destination.name }}</h1>
                     <p>{{ destination.location }}</p>
                     <p>{{ destination.description }}</p>
                     <p>Comments: ...</p>
                     <button class="btn"><a href="{% url 'details destination' destination.pk %}">More info</a></button>
                </div>
            </div>
        </div>
    {% endfor %}
    {% if not destinations %}
        <div class="destination-catalogue">
            <p>There is no one destination at this moment <i class="fa-regular fa-face-pensive"></i></p>
        </div>
    {% endif %}
  </main>

<footer>
    <p>&copy; 2023 Destination Catalogue. All rights reserved.</p>
      <div id="connect">
          <a href="https://www.facebook.com/" target="_blank" class="facebook"><i class="fa-brands fa-facebook"></i></a>
          <a href="https://www.instagram.com/" target="_blank" class="instagram"><i class="fa-brands fa-instagram"></i></a>
          <a href="https://twitter.com/" target="_blank" class="twitter"><i class="fa-brands fa-twitter"></i></a>
          <a href="#" target="_blank" class="googleplus"><i class="fa-brands fa-google-plus"></i></a>
      </div>
  </footer>
</body>
</html>

